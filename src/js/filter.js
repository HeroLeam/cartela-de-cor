var listaColecoes = [
  {
    colecao: "estamparia",
    codigos: [
      "am009",
      "az014",
      "bc001",
      "rs015",
      "rs016",
      "rs017",
      "rs018",
      "cm217",
      "lr001",
      "lr005",
      "mr003",
      "mr004",
      "rs010",
      "rx004",
      "rx005",
      "vd015",
      "vd016",
      "vd383",
      "lr415",
      "am002",
      "am003",
      "az010",
      "az013",
      "az384",
      "cm324",
      "rs012",
      "rs014",
      "rx002",
      "rx256",
      "vd011",
      "vd012",
      "vd013",
      "vd014",
      "vd542",
      "vm001",
      "cm004",
      "pt002",
      "mc402",
      "mc506",
      "cz282",
      "am001",
      "am493",
      "am732",
      "am746",
      "am283",
      "am046",
      "am108",
      "az730",
      "az755",
      "az443",
      "az003",
      "az004",
      "az527",
      "az121",
      "az012",
      "az398",
      "cm003",
      "cm739",
      "cm001",
      "cz100",
      "mc303",
      "mc303",
      "cz364",
      "cz276",
      "lr148",
      "lr401",
      "lr541",
      "lr710",
      "mr002",
      "mr001",
      "mr034",
      "mr431",
      "rs204",
      "rs004",
      "rs008",
      "rs009",
      "rs176",
      "rs186",
      "rs252",
      "rs310",
      "rs368",
      "rs245",
      "rs546",
      "rx160",
      "rx235",
      "vd488",
      "vd170",
      "vd336",
      "vd407",
      "vd538",
      "vd067",
      "vd107",
      "vd207",
      "vd229",
      "vd307",
      "vd445",
      "vm002",
      "am487",
      "am905",
      "lr357",
      "lr505",
      "rs560",
      "rs927",
      "rs929",
      "rs750",
      "vd937",
      "vd749",
      "vd545",
    ],
  },
  {
    colecao: "tp_iv-18",
    codigos: [
      "am408",
      "am409",
      "az384",
      "az393",
      "az395",
      "az398",
      "az410",
      "az412",
      "bc001",
      "bd399",
      "cm324",
      "cz351",
      "cz364",
      "lr352",
      "lr401",
      "mc080",
      "mc402",
      "pt002",
      "rs374",
      "rs397",
      "rs400",
      "rs403",
      "rs404",
      "rs411",
      "rs413",
      "vd405",
      "vd406",
      "vd407",
      "vm385",
    ],
  },
  {
    colecao: "pv18",
    codigos: [
      "am408",
      "am409",
      "az384",
      "az393",
      "az395",
      "az418",
      "az422",
      "az423",
      "bc001",
      "cm324",
      "cm424",
      "cz351",
      "lr414",
      "lr415",
      "mc080",
      "pt002",
      "rs374",
      "rs400",
      "rs403",
      "rs411",
      "rs413",
      "rs416",
      "rs417",
      "rs421",
      "vd406",
      "vd407",
      "vd419",
      "vd420",
      "vm385",
    ],
  },
  {
    colecao: "av18-19",
    codigos: [
      "am408",
      "az384",
      "az395",
      "az418",
      "az423",
      "az435",
      "bc001",
      "cm324",
      "cm432",
      "cz351",
      "lr357",
      "lr415",
      "lr430",
      "mc080",
      "mr431",
      "pt002",
      "rs416",
      "rs417",
      "rs425",
      "rs426",
      "rs427",
      "rs428",
      "rs436",
      "rs437",
      "vd419",
      "vd420",
      "vd433",
      "vd434",
      "vm385",
    ],
  },
  {
    colecao: "av_iv-19",
    codigos: [
      "am391",
      "am448",
      "az384",
      "az441",
      "az442",
      "az443",
      "az444",
      "bc001",
      "bd450",
      "bd451",
      "cm324",
      "cm432",
      "cm438",
      "cz351",
      "lr415",
      "lr430",
      "lr447",
      "mc080",
      "mc402",
      "pt002",
      "rs425",
      "rs426",
      "rs428",
      "rs436",
      "rs439",
      "rs440",
      "vd445",
      "vd446",
      "vm449",
    ],
  },
  {
    colecao: "pv19",
    codigos: [
      "am353",
      "am460",
      "am461",
      "az384",
      "az443",
      "az444",
      "az453",
      "az454",
      "az455",
      "bc001",
      "cm324",
      "cm438",
      "cz351",
      "cz364",
      "lr415",
      "lr430",
      "lr459",
      "mc080",
      "pt002",
      "rs323",
      "rs425",
      "rs428",
      "rs436",
      "rs439",
      "rs458",
      "vd433",
      "vd445",
      "vd456",
      "vd457",
      "vm449",
    ],
  },
  {
    colecao: "av19-20",
    codigos: [
      "am353",
      "am487",
      "az384",
      "az443",
      "az444",
      "az454",
      "az455",
      "az461",
      "az485",
      "bc001",
      "cm324",
      "cm438",
      "cz351",
      "lr415",
      "lr430",
      "lr459",
      "mc080",
      "mc481",
      "pt002",
      "rs323",
      "rs425",
      "rs428",
      "rs436",
      "rs439",
      "rs458",
      "rs484",
      "rs486",
      "vd433",
      "vd445",
      "vd482",
      "vd483",
      "vm449",
    ],
  },
  {
    colecao: "iv20",
    codigos: [
      "am461",
      "am493",
      "am504",
      "az360",
      "az384",
      "az444",
      "az489",
      "az502",
      "az503",
      "bc001",
      "bd495",
      "cm324",
      "cz351",
      "lr415",
      "lr492",
      "lr496",
      "mc080",
      "mc402",
      "mc501",
      "pt002",
      "rs323",
      "rs416",
      "rs436",
      "rs439",
      "rs486",
      "rs505",
      "vd482",
      "vd490",
      "vd498",
      "vd499",
      "vm449",
      "vm494",
    ],
  },
  {
    colecao: "av20-21",
    codigos: [
      "am316",
      "am493",
      "am517",
      "az384",
      "az390",
      "az443",
      "az444",
      "az525",
      "az527",
      "bc001",
      "cm324",
      "lr415",
      "lr459",
      "lr518",
      "mc402",
      "mc501",
      "mc506",
      "pt002",
      "rs323",
      "rs50",
      "rs515",
      "rs516",
      "rs522",
      "rs523",
      "rs541",
      "vd420",
      "vd498",
      "vd521",
      "vd526",
      "vm449",
    ],
  },
  {
    colecao: "iv21",
    codigos: [
      "am316",
      "am493",
      "am517",
      "az384",
      "az443",
      "az444",
      "az525",
      "bc001",
      "cm324",
      "cz535",
      "lr415",
      "lr459",
      "lr541",
      "mc402",
      "mc501",
      "mc506",
      "pt002",
      "rs425",
      "rs426",
      "rs439",
      "rs515",
      "rs516",
      "rs520",
      "rs539",
      "rs540",
      "vd420",
      "vd498",
      "vd526",
      "vd538",
      "vd542",
      "vm449",
    ],
  },
  {
    colecao: "pv21",
    codigos: [
      "am353",
      "am493",
      "am545",
      "az384",
      "az443",
      "az444",
      "az525",
      "az543",
      "bc001",
      "cm324",
      "cm438",
      "lr415",
      "lr459",
      "mc402",
      "mc501",
      "mc506",
      "pt002",
      "rs323",
      "rs367",
      "rs416",
      "rs523",
      "rs544",
      "rs546",
      "vd420",
      "vd433",
      "vd498",
      "vd538",
      "vm449",
    ],
  },
  {
    colecao: "av21-22",
    codigos: [
      "am001",
      "am391",
      "am493",
      "az001",
      "az384",
      "az444",
      "az525",
      "bc001",
      "cm001",
      "cm324",
      "cm449",
      "cz001",
      "lr001",
      "lr415",
      "mc402",
      "mc501",
      "mc506",
      "pt002",
      "rs001",
      "rs002",
      "rs323",
      "rs416",
      "rs544",
      "rs546",
      "vd001",
      "vd383",
      "vd498",
    ],
  },
  {
    colecao: "iv22",
    codigos: [
      "am002",
      "am003",
      "am004",
      "am005",
      "az003",
      "az004",
      "az005",
      "az384",
      "az525",
      "bc001",
      "bd001",
      "cm324",
      "cz535",
      "lr001",
      "lr415",
      "lr541",
      "mc402",
      "mc501",
      "mc506",
      "mr001",
      "pt002",
      "rs001",
      "rs003",
      "rs004",
      "rs323",
      "rs439",
      "rs516",
      "rs546",
      "vd002",
      "vd003",
      "vd004",
      "vm449",
    ],
  },
  {
    colecao: "pv22",
    codigos: [
      "am002",
      "am003",
      "am004",
      "az003",
      "az005",
      "az006",
      "az384",
      "az525",
      "bc001",
      "cm002",
      "cm324",
      "lr001",
      "lr401",
      "lr415",
      "mc402",
      "mc501",
      "mc506",
      "mr002",
      "pt002",
      "rs001",
      "rs003",
      "rs004",
      "rs005",
      "rs516",
      "rs546",
      "rx256",
      "vd002",
      "vd005",
      "vd006",
      "vd445",
      "vm001",
    ],
  },
  {
    colecao: "av23",
    codigos: [
      "am002",
      "am003",
      "am006",
      "az003",
      "az006",
      "az008",
      "az384",
      "az525",
      "bc001",
      "cm002",
      "cm324",
      "cz001",
      "lr001",
      "lr415",
      "lr541",
      "mc402",
      "mc501",
      "mc506",
      "pt002",
      "rs001",
      "rs004",
      "rs005",
      "rs006",
      "rs323",
      "rs516",
      "rs546",
      "vd007",
      "vd009",
      "vd445",
      "vm001",
      "vm002",
    ],
  },
  {
    colecao: "iv23",
    codigos: [
      "am001",
      "am003",
      "am008",
      "az003",
      "az009",
      "az384",
      "bc001",
      "bd001",
      "cm002",
      "cm324",
      "cz535",
      "lr002",
      "lr541",
      "mc402",
      "mc501",
      "mc506",
      "mr002",
      "pt002",
      "rs001",
      "rs007",
      "rs008",
      "rs009",
      "rs323",
      "rs546",
      "vd010",
      "vd011",
      "vm001",
      "vm002",
    ],
  },
  {
    colecao: "pv23",
    codigos: [
      "am001",
      "am002",
      "am003",
      "az003",
      "az006",
      "az009",
      "az384",
      "bc001",
      "cm002",
      "cm324",
      "cz535",
      "lr002",
      "lr415",
      "lr541",
      "mc402",
      "mc501",
      "mc506",
      "pt002",
      "rs001",
      "rs005",
      "rs006",
      "rs008",
      "rs009",
      "rs323",
      "rs546",
      "vd009",
      "vd011",
      "vd010",
      "vd445",
      "vm002",
      "vm001",
    ],
  },
  {
    colecao: "av24",
    codigos: [
      "am001",
      "am353",
      "am493",
      "az009",
      "az010",
      "az011",
      "az012",
      "az384",
      "az443",
      "bc001",
      "cm003",
      "cm324",
      "cm438",
      "lr003",
      "lr004",
      "mc402",
      "mc501",
      "mc506",
      "pt002",
      "rs008",
      "rs010",
      "rs011",
      "rs546",
      "rx002",
      "rx256",
      "vd010",
      "vd011",
      "vd383",
      "vd433",
      "vm001",
      "vm003",
    ],
  },
  {
    colecao: "iv24",
    codigos: [
      "am003",
      "am901",
      "az010",
      "az013",
      "az384",
      "bc001",
      "cm004",
      "cm324",
      "lr001",
      "lr005",
      "mc090",
      "mc402",
      "mc506",
      "mr003",
      "mr004",
      "pt002",
      "rs010",
      "rs012",
      "rs014",
      "rs929",
      "rx003",
      "rx256",
      "vd011",
      "vd012",
      "vd013",
      "vd014",
      "vd542",
      "vd939",
      "vm001",
      "vm004",
    ],
  },
  {
    colecao: "pv24",
    codigos: [
      "am003",
      "am009",
      "az010",
      "az012",
      "az013",
      "az014",
      "az384",
      "bc001",
      "cm324",
      "lr001",
      "lr005",
      "lr006",
      "lr415",
      "lr541",
      "mc090",
      "mc402",
      "mc506",
      "pt002",
      "rs012",
      "rs015",
      "rs016",
      "rs017",
      "rs018",
      "rs929",
      "rx004",
      "rx005",
      "vd012",
      "vd013",
      "vd015",
      "vd016",
      "vd0383",
      "vd939",
      "vm001",
    ],
  },
  {
    colecao: "av24-25",
    codigos: [
      "am003",
      "am009",
      "am010",
      "az010",
      "az015",
      "az384",
      "az443",
      "bc001",
      "cm005",
      "cm324",
      "lr001",
      "lr007",
      "lr541",
      "mc090",
      "mc402",
      "mc506",
      "pt002",
      "rs004",
      "rs015",
      "rs017",
      "rs018",
      "rs019",
      "rs756",
      "rx006",
      "vd012",
      "vd013",
      "vd015",
      "vd016",
      "vd017",
      "vd018",
      "vd939",
      "vm001",
    ],
  },
  {
    colecao: "inv25",
    codigos: [],
  },
  {
    colecao: "colecao",
    codigos: [],
  },
  {
    colecao: "colecao",
    codigos: [],
  },
];

// Função para atualizar o contador
function atualizarContador() {
  var contador = document.getElementById("contador");
  var cartelas = document.getElementsByClassName("cartela");
  contador.innerText = cartelas.length.toString();
}

// Função para filtrar as cartelas
function filtrar() {
  var filtroCor = document.getElementById("filtro-cores").value.toLowerCase();
  var filtroColecao = document.getElementById("filtro-colecoes").value;
  var cartelas = document.getElementsByClassName("cartela");
  var mensagemErro = document.getElementById("mensagem-erro");
  var contador = document.getElementById("contador");

  var exibeMensagemErro = true;
  var count = 0;

  for (var i = 0; i < cartelas.length; i++) {
    var cartela = cartelas[i];
    var cor = cartela.getElementsByClassName("linha")[0];
    var descricao = cartela.getElementsByClassName("linha")[2];
    var codigo = cartela.getElementsByTagName("h2")[0].innerText;

    var correspondeFiltroCor = false;
    var correspondeFiltroColecao = false;

    var corTexto = cor.innerText.toLowerCase();
    var descricaoTexto = descricao.innerText.toLowerCase();

    if (
      descricaoTexto
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, ")
        .includes(filtroCor) ||
      corTexto
        .normalize("NFD")
        .replace(/[\u0300-\u036f]/g, ")
        .includes(filtroCor)
    ) {
      correspondeFiltroCor = true;
    }

    if (filtroColecao === "todas") {
      correspondeFiltroColecao = true;
    } else {
      for (var k = 0; k < listaColecoes.length; k++) {
        var colecao = listaColecoes[k];
        if (
          colecao.colecao.toLowerCase() === filtroColecao.toLowerCase() &&
          colecao.codigos.includes(codigo.toLowerCase())
        ) {
          correspondeFiltroColecao = true;
          break;
        }
      }
    }

    if ((correspondeFiltroCor && filtroCor !== ") || filtroCor === "todas") {
      cartela.style.display = correspondeFiltroColecao ? "flex" : "none";
      exibeMensagemErro = false;
      if (correspondeFiltroColecao) {
        count++;
      }
    } else {
      cartela.style.display = "none";
    }
  }

  contador.innerText = count.toString();

  if (exibeMensagemErro || count === 0) {
    mensagemErro.style.display = "block";
  } else {
    mensagemErro.style.display = "none";
  }
}

// Função para limpar os filtros
function limparFiltros() {
  document.getElementById("filtro-cores").value = "todas";
  document.getElementById("filtro-colecoes").value = "todas";
  document.getElementById("searchInput").value = ";
  filtrar();
}

// Evento DOMContentLoaded para chamar a função de atualizar o contador
document.addEventListener("DOMContentLoaded", atualizarContador);
